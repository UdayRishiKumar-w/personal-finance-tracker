name: Super-Linter

on:
    pull_request:
        branches: [main]
    push:
        branches: [main]

permissions:
    contents: read
    pull-requests: write
    statuses: write

jobs:
    super-lint:
        name: Super-Linter
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Run Super-Linter
              uses: github/super-linter@v5
              env:
                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
                  DEFAULT_BRANCH: main

                  VALIDATE_JS: true
                  VALIDATE_TS: true
                  VALIDATE_CSS: true
                  VALIDATE_HTML: true
                  VALIDATE_JSON: true
                  VALIDATE_YAML: true
                  VALIDATE_MARKDOWN: true
                  VALIDATE_SHELL: true
                  VALIDATE_DOCKERFILE: true

                  # Point to config files
                  ESLINT_CONFIG_FILE: frontend/eslint.config.mjs
                  STYLELINT_CONFIG_FILE: frontend/stylelint.config.mjs

                  # Do not fail the workflow on lint errors by default; keep annotations only
                  FAIL_ON_ERROR: false
                  FILTER_REGEX_EXCLUDE: "^(backend/|target/|node_modules/|frontend/dist/).*"
